# 修复数据库表名不匹配错误

根据后端日志分析，项目创建失败的根本原因是**表名不匹配**：
*   **错误信息**：`Could not find the table 'public.design_projects' in the schema cache`
*   **提示**：`Perhaps you meant the table 'public.design_works'`

这意味着 Supabase 中实际存在的表名是 `design_works`，而我们的代码和迁移脚本中使用的是 `design_projects`。这可能是由于之前的迁移脚本执行失败或未正确生效，或者现有数据库中已经存在一个旧表。

为了彻底解决这个问题，我将采取以下方案：

## 1. 统一表名为 `design_projects` (Backend)
由于 `design_projects` 是我们在代码中广泛使用的名称（Model、API 等），我们将强制创建这个表，而不是去适配可能不正确的旧表名。

*   **操作**：创建一个新的 SQL 迁移文件，再次执行建表语句，确保 `design_projects` 表真实存在。

## 2. 刷新 Supabase Schema 缓存
Supabase (PostgREST) 有时会缓存 Schema，导致新建的表无法立即被 API 访问。
*   **操作**：在执行建表语句后，通过执行 `NOTIFY pgrst, 'reload schema';` 来强制刷新缓存。

## 3. 验证与清理
*   **清理**：检查并清理可能存在的混淆表（如 `design_works`，如果确认不再使用）。
*   **验证**：重启后端服务，再次尝试创建项目，确认 500 错误消失。

## 4. 实施步骤
1.  **创建修正迁移脚本**：包含 `CREATE TABLE IF NOT EXISTS design_projects` 和 `NOTIFY pgrst`。
2.  **执行迁移**：使用 `RunCommand` 执行 SQL。
3.  **重启后端**：确保所有连接都使用最新的 Schema。